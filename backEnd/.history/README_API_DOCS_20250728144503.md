# è‚¡ç¥¨ç®¡ç†APIæ–‡æ¡£éƒ¨ç½²åŒ…

## ğŸ“‹ é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„è‚¡ç¥¨ç®¡ç†APIç³»ç»Ÿï¼ŒåŒ…å«æŒä»“ç®¡ç†ã€å¸‚åœºæ•°æ®ã€äº¤æ˜“æ“ä½œå’Œè´¦æˆ·ç®¡ç†ç­‰åŠŸèƒ½ã€‚

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### 1. ç¯å¢ƒè¦æ±‚
- Node.js (ç‰ˆæœ¬ 14 æˆ–æ›´é«˜)
- npm æˆ– yarn

### 2. å®‰è£…ä¾èµ–
```bash
npm install
```

### 3. å¯åŠ¨æœåŠ¡å™¨
```bash
npm start
```

### 4. è®¿é—®APIæ–‡æ¡£
æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:3000/api-doc/

## ğŸ“š APIæ¥å£è¯´æ˜

### æŒä»“ç®¡ç†
- `GET /api/portfolio` - è·å–æ‰€æœ‰æŒä»“ä¿¡æ¯
- `GET /api/portfolio/:ticker` - è·å–ç‰¹å®šè‚¡ç¥¨æŒä»“

### å¸‚åœºæ•°æ®
- `GET /api/market` - è·å–æ‰€æœ‰å¯äº¤æ˜“è‚¡ç¥¨åˆ—è¡¨
- `GET /api/market/:ticker` - è·å–ç‰¹å®šè‚¡ç¥¨å¸‚åœºæ•°æ®
- `GET /api/market/:ticker/max-buy` - è·å–æœ€å¤§å¯ä¹°å…¥æ•°é‡

### äº¤æ˜“æ“ä½œ
- `POST /api/trade/buy` - ä¹°å…¥è‚¡ç¥¨
- `POST /api/trade/sell` - å–å‡ºè‚¡ç¥¨

### è´¦æˆ·ç®¡ç†
- `GET /api/account` - è·å–è´¦æˆ·ä¿¡æ¯
- `POST /api/account/deposit` - å……å€¼

## ğŸ§ª æµ‹è¯•API

è¿è¡Œæµ‹è¯•è„šæœ¬ï¼š
```bash
node test-stock-api.js
```

## ğŸ“Š æµ‹è¯•æ•°æ®

ç³»ç»Ÿå·²é¢„ç½®æµ‹è¯•æ•°æ®ï¼š
- åˆå§‹èµ„é‡‘ï¼š100,000
- æµ‹è¯•æŒä»“ï¼šGLE FPã€KPN NAã€AALB NA
- è‚¡ç¥¨æ•°æ®ï¼šæ¥è‡ªçœŸå®CSVæ–‡ä»¶

## ğŸ”§ æŠ€æœ¯æ ˆ

- **åç«¯æ¡†æ¶**: Express.js
- **APIæ–‡æ¡£**: Swagger UI
- **æ•°æ®æ ¼å¼**: JSON
- **æ—¥å¿—ç³»ç»Ÿ**: Winston

## ğŸ“ é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ api/
â”‚   â””â”€â”€ openapi.yaml          # APIè§„èŒƒæ–‡æ¡£
â”œâ”€â”€ controllers/
â”‚   â”œâ”€â”€ Controller.js         # åŸºç¡€æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ StockController.js    # è‚¡ç¥¨ç®¡ç†æ§åˆ¶å™¨
â”‚   â””â”€â”€ index.js             # æ§åˆ¶å™¨å¯¼å‡º
â”œâ”€â”€ services/
â”‚   â”œâ”€â”€ StockDataService.js   # è‚¡ç¥¨æ•°æ®æœåŠ¡
â”‚   â””â”€â”€ AccountService.js     # è´¦æˆ·æœåŠ¡
â”œâ”€â”€ uploaded_files/
â”‚   â””â”€â”€ top5_companies_filtered.csv  # è‚¡ç¥¨æ•°æ®
â”œâ”€â”€ expressServer.js          # ExpressæœåŠ¡å™¨é…ç½®
â”œâ”€â”€ index.js                  # åº”ç”¨å…¥å£
â”œâ”€â”€ package.json              # é¡¹ç›®é…ç½®
â””â”€â”€ test-stock-api.js        # APIæµ‹è¯•è„šæœ¬
```

## ğŸŒ åœ¨çº¿è®¿é—®

å¯åŠ¨æœåŠ¡å™¨åï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š

- **APIæ–‡æ¡£**: http://localhost:3000/api-doc/
- **APIæ ¹è·¯å¾„**: http://localhost:3000/
- **å¥åº·æ£€æŸ¥**: http://localhost:3000/hello

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### è·å–æŒä»“ä¿¡æ¯
```bash
curl -X GET http://localhost:3000/api/portfolio
```

### ä¹°å…¥è‚¡ç¥¨
```bash
curl -X POST http://localhost:3000/api/trade/buy \
  -H "Content-Type: application/json" \
  -d '{"ticker":"GLE FP","quantity":10}'
```

### è·å–è´¦æˆ·ä¿¡æ¯
```bash
curl -X GET http://localhost:3000/api/account
```

## ğŸ” æ•…éšœæ’é™¤

1. **ç«¯å£è¢«å ç”¨**: ä¿®æ”¹ `config.js` ä¸­çš„ `URL_PORT` å€¼
2. **ä¾èµ–å®‰è£…å¤±è´¥**: åˆ é™¤ `node_modules` æ–‡ä»¶å¤¹ï¼Œé‡æ–°è¿è¡Œ `npm install`
3. **æ•°æ®åŠ è½½å¤±è´¥**: æ£€æŸ¥ `uploaded_files/top5_companies_filtered.csv` æ–‡ä»¶æ˜¯å¦å­˜åœ¨

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. Node.js ç‰ˆæœ¬æ˜¯å¦æ­£ç¡®
2. æ‰€æœ‰ä¾èµ–æ˜¯å¦å®‰è£…å®Œæˆ
3. ç«¯å£ 3000 æ˜¯å¦è¢«å ç”¨
4. CSV æ•°æ®æ–‡ä»¶æ˜¯å¦å­˜åœ¨

---

**æ³¨æ„**: è¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºç³»ç»Ÿï¼Œæ•°æ®ä¼šåœ¨é‡å¯åé‡ç½®ã€‚ç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨æ•°æ®åº“å­˜å‚¨ã€‚ 